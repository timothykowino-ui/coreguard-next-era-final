<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HubSpot Form Test</title>
  <style>
    :root {
      --site-accent: #0b5fff;
      --label-silver: #C0C0C0;
      --site-text: #111;
    }
    body {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: #f7f7f8;
      color: var(--site-text);
      padding: 28px;
    }
    .card {
      max-width: 760px;
      margin: 12px auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 6px 24px rgba(10,10,12,0.06);
      padding: 20px;
    }
    h1 { margin: 0 0 12px 0; font-size: 18px; }
    p { margin: 0 0 12px 0; color: rgba(0,0,0,0.6); }

    /* Button */
    .btn {
      display: inline-block;
      padding: 10px 16px;
      background: var(--site-accent);
      color: white;
      border-radius: 8px;
      border: 0;
      cursor: pointer;
      font-weight: 600;
    }

    /* HubSpot wrapper */
    .custom-hs-form {
      max-width: 560px;
      margin: 18px 0 0 0;
      font-family: inherit;
      color: var(--site-text);
    }

    /* Force labels visible and silver color */
    .custom-hs-form label,
    .custom-hs-form .label,
    .custom-hs-form .hs-form-field > label,
    .custom-hs-form .hs-field-label,
    .custom-hs-form .hs-form-field .label {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      font-weight: 600 !important;
      font-size: 0.95rem !important;
      margin-bottom: 6px !important;
      color: var(--label-silver) !important;
    }

    .custom-hs-form input::placeholder,
    .custom-hs-form textarea::placeholder { opacity: 0.65; }

    .custom-hs-form input,
    .custom-hs-form textarea,
    .custom-hs-form select {
      width: 100% !important;
      padding: 10px 12px !important;
      border-radius: 8px !important;
      border: 1px solid rgba(0,0,0,0.12) !important;
      box-sizing: border-box !important;
      font-size: 1rem !important;
      background: #fff !important;
    }

    /* Hide HubSpot footer/privacy/legal chrome so it's not duplicated on test page */
    .custom-hs-form .hs-form-privacy,
    .custom-hs-form .hs-form-legal,
    .custom-hs-form .hs-form-footer,
    .custom-hs-form .hs-form-branding,
    .custom-hs-form .hs-consent,
    .custom-hs-form .hs-form-required {
      display: none !important;
    }

    .custom-hs-form [class*="privacy"],
    .custom-hs-form [class*="Privacy"],
    .custom-hs-form [class*="terms"],
    .custom-hs-form [id*="privacy"],
    .custom-hs-form [id*="terms"] {
      display: none !important;
    }

    .muted {
      color: rgba(0,0,0,0.55);
      font-size: 13px;
    }

    .small {
      font-size: 13px;
      color: rgba(0,0,0,0.6);
    }

    .inline-close {
      display:inline-block;
      margin-left:12px;
      padding:6px 10px;
      border-radius:6px;
      border:1px solid rgba(0,0,0,0.08);
      cursor:pointer;
      background:transparent;
    }

    .status {
      margin-top:10px;
      color: #b13131;
      font-weight:600;
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>HubSpot Form — On-demand test</h1>
    <p class="small">Click the button to load the HubSpot forms script and render the form below. This isolates the HubSpot embed and CSS so you can test label styles and privacy link removal.</p>

    <div>
      <button id="open-btn" class="btn">Open Newsletter Form</button>
      <button id="close-btn" class="inline-close" style="display:none">Close</button>
      <span id="status" class="status" aria-live="polite"></span>
    </div>

    <!-- Container where the HubSpot form will be rendered -->
    <div id="form-wrap" style="margin-top:18px;">
      <!-- Form will be injected here -->
    </div>

    <hr style="margin-top:20px; margin-bottom:10px;" />

    <p class="muted">Notes: you may see cross-origin iframe errors in the console — those are expected and don't affect the form rendering.</p>
  </div>

  <script>
    (function(){
      // Replace these with your portal & form ids if needed
      var PORTAL_ID = "147364865";
      var FORM_ID = "cfbc55fc-7e92-44c9-ba70-5ab3eed9742e";

      var scriptId = "hs-forms-script";
      var targetId = "newsletter-hs-form";
      var created = false;

      var openBtn = document.getElementById("open-btn");
      var closeBtn = document.getElementById("close-btn");
      var statusEl = document.getElementById("status");
      var formWrap = document.getElementById("form-wrap");

      function setStatus(msg, isError) {
        statusEl.textContent = msg || "";
        statusEl.style.color = isError ? "#b13131" : "#2b8a2b";
      }

      function createTargetIfMissing() {
        if (!document.getElementById(targetId)) {
          var d = document.createElement("div");
          d.id = targetId;
          d.className = "custom-hs-form";
          formWrap.appendChild(d);
        }
      }

      function loadHubSpotAndCreate() {
        if (created) {
          setStatus("Form already created.", false);
          return;
        }

        createTargetIfMissing();

        // if script already exists, just try to create after short delay
        var existing = document.getElementById(scriptId);
        if (existing) {
          setStatus("HubSpot script present — creating form...", false);
          setTimeout(function(){ tryCreate(); }, 250);
          return;
        }

        setStatus("Loading HubSpot forms script...", false);
        var s = document.createElement("script");
        s.id = scriptId;
        s.src = "https://js.hsforms.net/forms/v2.js";
        s.async = true;
        s.onload = function(){
          setStatus("HubSpot script loaded — creating form...", false);
          tryCreate();
        };
        s.onerror = function(ev){
          setStatus("Failed to load HubSpot script (network or blocked).", true);
          console.error("hs forms script failed", ev);
        };
        document.head.appendChild(s);
      }

      function tryCreate() {
        if (!window.hbspt) {
          setStatus("HubSpot library not available after load.", true);
          console.error("hbspt missing");
          return;
        }
        try {
          window.hbspt.forms.create({
            portalId: PORTAL_ID,
            formId: FORM_ID,
            target: "#" + targetId,
            cssClassName: "custom-hs-form"
          });
          created = true;
          setStatus("Form created.", false);
          openBtn.style.display = "none";
          closeBtn.style.display = "inline-block";
        } catch (err) {
          setStatus("Failed to create the HubSpot form: " + String(err), true);
          console.error("create failed", err);
        }
      }

      openBtn.addEventListener("click", function(e){
        e.preventDefault();
        // ensure container mounted
        loadHubSpotAndCreate();
      });

      closeBtn.addEventListener("click", function(e){
        e.preventDefault();
        // remove the container to simulate closing (HubSpot won't provide destroy, but we can remove the wrapper)
        var el = document.getElementById(targetId);
        if (el && el.parentNode) {
          el.parentNode.removeChild(el);
        }
        created = false;
        openBtn.style.display = "inline-block";
        closeBtn.style.display = "none";
        setStatus("", false);
      });

    })();
  </script>
</body>
</html>switch to Notepad
